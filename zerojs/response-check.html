<!DOCTYPE html>
<html lang="KO">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>response-check(Date)</title>
<style>
    #screen{
        width: 300px;
        height: 200px;
        text-align: center;
        user-select: none;
    }
    #screen.waiting{
        background-color: aqua;
    }
    #screen.ready{
        background-color: red;
        color: white;
    }
    #screen.now{
        background-color: greenyellow;
    }
</style>
</head>
<body>
   <div id="screen" class="waiting">클릭해서 시작하세요!</div>
   <div id="result"></div>
   <script>
       const $screen = document.querySelector("#screen");
       const $result = document.querySelector("#result");
      // 시간을 재려고 할때 new Date() 이용한다. 
      // new Date(2021,2,31)  === 년/월/일 월을 0부터 시작!! 여기서 2는 3월임을 의미함.
       let startTime;  //시작시간
       let endTime;   //끝시간

    //    $screen.addEventListener('click',(event) => {
    //         if($screen.event.target.classList.contains('waiting')){
    //             event.target이 $screen과 동일함!!
    //         }
    //    })

       $screen.addEventListener('click',function(){
        if($screen.classList.contains('waiting')){  //파랑
               //대기화면
               startTime = new Date() // 시작 시간을 잰다.
               $screen.classList.remove('waiting');
               $screen.classList.add('ready');
               $screen.textContent = '초록색이 되면 클릭하세요.'
        //타이머는 파랑화면을 클릭하면 바로 타이머가 실행되어야 하니까 요기 위치에 코딩!!!!! 
        //Math.random 이용하는 방법 차근차근하게 하기
        // 0 <= x < 1 
        // 0*1000+2000 <= x*1000+2000 < 1*1000+2000
        // 2000 <= x*1000+2000 < 3000  이때 Math.floor해주면 2000~2999의 자연수가 된다.
               setTimeout(function(){
                   $screen.classList.remove('ready'); 
                   $screen.classList.add('now');
                   $screen.textContent = '클릭하세요.'
                   //시간재기 시작
               }, Math.floor(Math.random()*1000) + 2000);  //2000~3000사이수
           }
           else if($screen.classList.contains('ready')){  //빨강
               //준비화면
           }
           else if($screen.classList.contains('now')){  //초록
               //클릭화면
               //끝시간 재기
               //시간 차이 저장하기
               endTime = new Date()  //끝시간 잰다.
               $result.textContent = `${endTime - startTime}`;
               $screen.classList.remove('now');
               $screen.classList.add('waiting');
               $screen.textContent = '클릭해서 시작해주세요.';
           }
       })
       </script>
</body>
</html>